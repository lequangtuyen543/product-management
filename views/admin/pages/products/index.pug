extends ../../layouts/default.pug
include ../../mixins/filterStatus.pug
include ../../mixins/search.pug
include ../../mixins/pagination.pug
include ../../mixins/form-change-multi.pug
include ../../mixins/alert.pug

block main
  +alert-success(5000)    

  h1 Products List

  card.mb-3   
    .card-header Filter and Search
    .card-body.row
      .col-6
        +filterStatus(filterStatus)
      .col-6
        +search(keyword)

  card.mb-3   
    .card-header List Products
    .card-body
      .row 
        .col-8
          +form-change-multi(`${prefixAdmin}/products/change-multi?_method=PATCH`)
        .col-4.text-right
          a.btn.btn-sm.btn-success(href=`${prefixAdmin}/products/create`) + Add New

      table.table.table-hover.table-sm(
        checkbox-multi
      )
        thead.thead-dark
          tr
            th  
              input(type="checkbox" name="checkall")
            th(scope="col") #
            th(scope="col") Name
            th(scope="col") Price
            th(scope="col") Position
            th(scope="col") Image
            th(scope="col") Status
            th(scope="col") Actions
        tbody
          each item, index in products
            tr
              td 
                input(
                  type="checkbox" 
                  name="id" 
                  value=item.id 
                )
              th(scope="row") #{index + 1}
              td #{item.title}
              td $#{item.price}
              td 
                input(
                  type="number" 
                  name="position" 
                  value=item.position 
                  style="width: 60px;"
                  min="1"
                )
              td 
                img(src=item.thumbnail, alt=item.title width="100" height="100")
              td 
                if item.status == 'active'
                  a.badge.badge-success(
                    href="javascript:;"
                    data-status=item.status
                    data-id=item.id
                    button-change-status
                  ) #{item.status}
                else  
                  a.badge.badge-danger(
                    href="javascript:;"
                    data-status=item.status
                    data-id=item.id
                    button-change-status
                  ) #{item.status}
              td 
                button.btn.btn-sm.btn-primary Edit
                button.btn.btn-sm.btn-danger(
                  data-id=item.id
                  button-delete
                ) Delete

  +pagination(pagination)

  form(
    action="" 
    method="POST"
    id="form-change-status"
    data-path=`${prefixAdmin}/products/change-status`
  )

  form(
    action="" 
    method="POST"
    id="form-delete-item"
    data-path=`${prefixAdmin}/products/delete`
  )

  script(src="/admin/js/product.js") 

