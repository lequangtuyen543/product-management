extends ../../layouts/default.pug
include ../../mixins/alert.pug

block main
  if(role.permissions.includes('accounts_view'))
    +alert-success(5000)

    h1.mb-4 Page Accounts

    .card.mb-3  
      .card-header List 
      .card-body 
        .row 
          .col-8 
          .col-4 
            if(role.permissions.includes('accounts_create'))
              a.btn.btn-outline-success(href=`${prefixAdmin}/accounts/create`) + Create

        table.table.table-hover.table-sm
          thead.thead-dark
            tr
              th(scope="col") #
              th(scope="col") Avatar
              th(scope="col") Full name
              th(scope="col") Role
              th(scope="col") Email
              th(scope="col") Status
              th(scope="col") Actions
          tbody
            each item, index in records
              tr
                th(scope="row") #{index + 1}
                td 
                  img(src=item.avatar, alt=item.fullName width="100" height="100")
                td #{item.fullName}
                td #{item.role.title}            
                td #{item.email}            
                td 
                  if item.status == 'active'
                    a.badge.badge-success(
                      href="javascript:;"
                      data-status=item.status
                      data-id=item.id
                      button-change-status
                    ) #{item.status}
                  else  
                    a.badge.badge-danger(
                      href="javascript:;"
                      data-status=item.status
                      data-id=item.id
                      button-change-status
                    ) #{item.status}
                td 
                  a.btn.btn-sm.btn-secondary(href=`${prefixAdmin}/accounts/detail/${item.id}`) Detail
                  if(role.permissions.includes('accounts_edit'))
                    a.btn.btn-sm.btn-warning(href=`${prefixAdmin}/accounts/edit/${item.id}`) Edit
                  if(role.permissions.includes('accounts_delete'))
                    button.btn.btn-sm.btn-danger(
                      data-id=item.id
                      button-delete
                    ) Delete